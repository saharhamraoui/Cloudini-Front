<div class="leave-request-container">
  <div class="header-section">      
    <h1><i class="fas fa-calendar-plus"></i> New Leave Request</h1>
  </div>

  <div class="form-section">
    <div class="form-card">
      <form (ngSubmit)="createLeaveRequest()" #leaveForm="ngForm">
        <div class="form-group dual-inputs">
          <div class="input-field">
            <label for="start"><i class="far fa-calendar-alt"></i> Start Date</label>
            <input type="date" id="start" [(ngModel)]="newRequest.startDate" 
                   name="startDate" class="form-control" required
                   (change)="calculateDuration()">
          </div>
          
          <div class="input-field">
            <label for="end"><i class="far fa-calendar-alt"></i> End Date</label>
            <input type="date" id="end" [(ngModel)]="newRequest.endDate" 
                   name="endDate" class="form-control" required
                   (change)="calculateDuration()">
          </div>
        </div>

        <div class="duration-display" *ngIf="durationDays > 0">
          Duration: <strong>{{ durationDays }}</strong> day(s)
        </div>

        <div class="form-group">
          <label for="reason"><i class="far fa-comment-dots"></i> Reason</label>
          <textarea id="reason" [(ngModel)]="newRequest.reason" name="reason" 
                    class="form-control" rows="4" required
                    maxlength="200"></textarea>
          <div class="char-counter">{{ newRequest.reason.length || 0 }}/200</div>
        </div>

        <button type="submit" class="submit-btn" [disabled]="!leaveForm.valid || isSubmitting">
          <span *ngIf="!isSubmitting">Submit Request</span>
          <span *ngIf="isSubmitting">
            <i class="fas fa-spinner fa-spin"></i> Submitting...
          </span>
        </button>
      </form>
    </div>
    <div class="warning" *ngIf="getTotalLeaveDays() + durationDays > 20">
      <i class="fas fa-exclamation-triangle"></i>
      You will exceed the authorized limit of 20 leave days!
    </div>
    
  </div>

  <div class="history-section">
    <h2><i class="fas fa-history"></i> Request History</h2>
    
    <div class="history-cards">
      <div class="empty-state" *ngIf="leaveRequests.length === 0">
        <i class="far fa-folder-open"></i>
        <p>No requests recorded</p>
      </div>

      <div class="request-card" *ngFor="let request of leaveRequests" 
           [class]="request.status.toLowerCase()">
        <div class="card-header">
          <div class="date-range">
            {{ request.startDate | date: 'd MMM' }} - {{ request.endDate | date: 'd MMM yyyy' }}
          </div>
          <div class="status-badge">
            <i [class]="getStatusIcon(request.status)"></i>
            {{ request.status }}
          </div>
        </div>
        <div class="card-body">
          <p class="reason">{{ request.reason }}</p>
          <div class="card-footer">
            <span class="duration">
              <i class="fas fa-clock"></i> 
              {{ calculateDuration() }} days
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>