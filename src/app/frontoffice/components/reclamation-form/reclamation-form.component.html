<div class="reclamation-wrapper container py-4">
  <div class="card shadow-sm p-4">
    <h2 class="mb-4 text-primary">
      <i class="bi bi-download"></i> Soumettre une r√©clamation
    </h2>

    <form [formGroup]="form" (ngSubmit)="submit()">
      <!-- Description -->
      <div class="mb-4">
        <label for="description" class="form-label fw-semibold">üìù Description</label>
        <textarea
          class="form-control"
          placeholder="D√©crivez votre r√©clamation"
          formControlName="description"
          (blur)="categorizeText()"
          rows="4"
        ></textarea>
      </div>

      <!-- Webcam Capture -->
      <div class="mb-4">
        <label class="form-label fw-semibold">üì∏ Capture faciale</label>
        <div class="border rounded p-2 d-flex justify-content-center">
          <webcam [trigger]="triggerObservable" (imageCapture)="handleImage($event)"></webcam>
        </div>
        <button type="button" class="btn btn-outline-secondary mt-2" (click)="triggerSnapshot()">
          <i class="bi bi-camera"></i> Capturer
        </button>
      </div>

      <!-- Emotion -->
      <div *ngIf="emotion" class="alert alert-info d-flex align-items-center mt-3">
        <i class="bi bi-emoji-smile me-2"></i>
        √âmotion d√©tect√©e : <strong class="ms-1">{{ emotion }}</strong>
      </div>

      <!-- AI Category -->
      <div *ngIf="category" class="alert alert-warning d-flex align-items-center mt-2">
        <i class="bi bi-lightbulb me-2"></i>
        Cat√©gorie AI : <strong class="ms-1">{{ category }}</strong>
        <span class="ms-2 text-muted">({{ aiConfidence | number:'1.2-2' }})</span>
      </div>

      <!-- Submit -->
      <div class="d-grid mt-4">
        <button class="btn btn-primary" type="submit" [disabled]="form.invalid">
          üöÄ Envoyer la r√©clamation
        </button>
      </div>
    </form>

    <!-- Success message -->
    <div *ngIf="success" class="alert alert-success mt-4">
      ‚úÖ R√©clamation envoy√©e avec succ√®s !
    </div>
  </div>
</div>
