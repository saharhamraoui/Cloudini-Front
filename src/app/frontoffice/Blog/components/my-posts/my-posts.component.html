<section class="blog-header">
  <div class="overlay">
    <h1 class="blog-title">My Posts</h1>
    <p class="blog-subtitle">Manage your articles</p>
  </div>
</section>

<section class="blog-section">
  <div class="container">
    <!-- Loading Bar -->
    <div *ngIf="isLoading" class="loading-message text-center py-5">
      <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Loading in progress...</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage && !isLoading" class="alert alert-danger text-center">
      <i class="fas fa-exclamation-circle me-2"></i> {{ errorMessage }}
    </div>

    <!-- No Posts Message -->
    <div *ngIf="!isLoading && allPosts.length === 0" class="no-posts text-center py-5">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <i class="far fa-newspaper fa-3x text-muted mb-3"></i>
          <h3 class="text-muted">No posts found</h3>
          <p class="text-muted">You haven't created any posts yet</p>
          <button class="btn btn-primary mt-3" routerLink="/create-post">
            <i class="fas fa-plus-circle me-2"></i> Create new post
          </button>
        </div>
      </div>
    </div>

    <!-- Posts List -->
    <div *ngIf="!isLoading && allPosts.length > 0" class="row g-4">
      <div *ngFor="let post of posts" class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm post-card">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <h2 class="post-title mb-0">{{ post.title }}</h2>
              <span class="badge bg-primary">{{ post.tags?.length || 0 }} tags</span>
            </div>

            <p class="post-meta text-muted small">
              <i class="far fa-calendar-alt me-1"></i> {{ post.createdAt | date:'MM/dd/yyyy' }}
            </p>

            <p class="post-excerpt">
              {{ (post.content || '').substring(0, 150) }}...
            </p>

            <!-- Tags -->
            <div *ngIf="post.tags && post.tags.length > 0" class="mt-3">
              <div *ngFor="let tag of post.tags" class="badge bg-light text-dark me-1 mb-1">
                #{{ tag.name }}
              </div>
            </div>
          </div>

          <div class="card-footer bg-white border-top-0">
            <div class="d-flex justify-content-between">
              <button class="btn btn-sm btn-outline-primary" (click)="viewPostDetails(post.id!)">
                <i class="far fa-eye me-1"></i> View
              </button>
              <button class="btn btn-sm btn-outline-warning" (click)="editPost(post.id!)">
                <i class="far fa-edit me-1"></i> Edit
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="deletePost(post.id!)">
                <i class="far fa-trash-alt me-1"></i> Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <nav *ngIf="allPosts.length > postsPerPage" class="mt-5">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="changePage(currentPage - 1)">
            <i class="fas fa-chevron-left"></i> Previous
          </a>
        </li>

        <li *ngFor="let page of pages" class="page-item" [class.active]="page === currentPage">
          <a class="page-link" (click)="changePage(page)">{{ page }}</a>
        </li>

        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="changePage(currentPage + 1)">
            Next <i class="fas fa-chevron-right"></i>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</section>
